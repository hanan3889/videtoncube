name: Check Secrets
on:
  push:
    branches: [ develop ]
  workflow_dispatch:

jobs:
  check-secrets:
    runs-on: ubuntu-latest
    environment: dev
    steps:
      - name: Check if secrets are set
        env:
          MYSQL_PASSWORD: ${{ secrets.MYSQL_PASSWORD }}
          MYSQL_ROOT_PASSWORD: ${{ secrets.MYSQL_ROOT_PASSWORD }}
          DB_PASSWORD: ${{ secrets.DB_PASSWORD }}
        run: |
          if [ -z "$MYSQL_PASSWORD" ]; then
            echo "MYSQL_PASSWORD secret is not set"
            exit 1
          else
            echo "MYSQL_PASSWORD secret is set"
          fi
          if [ -z "$MYSQL_ROOT_PASSWORD" ]; then
            echo "MYSQL_ROOT_PASSWORD secret is not set"
            exit 1
          else
            echo "MYSQL_ROOT_PASSWORD secret is set"
          fi
          if [ -z "$DB_PASSWORD" ]; then
            echo "DB_PASSWORD secret is not set"
            exit 1
          else
            echo "DB_PASSWORD secret is set"
          fi
